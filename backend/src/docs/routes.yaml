openapi: 3.0.0
info:
  title: Assignment 8 â€” Users API
  version: 1.0.0
  description: Secure RESTful APIs for user management, aligned with Assignment 8 and Postman collection.

servers:
  - url: http://localhost:3000

paths:
  /user:
    post:
      summary: Create User
      description: Create a new user with validated full name, email, and password.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - fullName
                - email
                - password
              properties:
                fullName:
                  type: string
                  example: "John Doe"
                email:
                  type: string
                  format: email
                  example: "john.doe@example.com"
                password:
                  type: string
                  format: password
                  example: "S3cure!Pass1@"
      responses:
        "201":
          description: User created successfully
          content:
            application/json:
              example:
                message: "User created successfully."
        "400":
          description: Validation error
          content:
            application/json:
              example:
                error: "Validation failed."

  /user/login:
    post:
      summary: User Login
      description: Authenticate a user using email and password.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - email
                - password
              properties:
                email:
                  type: string
                  example: "john.doe@example.com"
                password:
                  type: string
                  example: "S3cure!Pass1@"
      responses:
        "200":
          description: Login successful
          content:
            application/json:
              example:
                message: "Login successful."
                user:
                  fullName: "John Doe"
                  email: "john.doe@example.com"
                  imagePath: "/images/john_doe_example.png"
        "400":
          description: Invalid credentials
          content:
            application/json:
              example:
                error: "Invalid password."
        "404":
          description: User not found
          content:
            application/json:
              example:
                error: "User not found."

  /user/edit:
    put:
      summary: Update User Details
      description: Edit user full name and/or password using email as identifier.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - email
              properties:
                email:
                  type: string
                  example: "john.doe@example.com"
                fullName:
                  type: string
                  example: "Johnny Doe"
                password:
                  type: string
                  example: "N3w!Pass@123"
      responses:
        "200":
          description: User details updated successfully
          content:
            application/json:
              example:
                message: "User details updated successfully."
        "400":
          description: Validation error
          content:
            application/json:
              example:
                error: "Validation failed."
        "404":
          description: User not found
          content:
            application/json:
              example:
                error: "User not found."

  /users:
    get:
      summary: Retrieve All Users
      description: Return all registered users.
      responses:
        "200":
          description: List of users
          content:
            application/json:
              example:
                users:
                  - fullName: "John Doe"
                    email: "john.doe@example.com"
                    imagePath: "/images/john_doe_example.png"

  /user/uploadImage:
    post:
      summary: Upload User Profile Image
      description: Upload a JPEG/PNG/GIF image for a user specified by email.
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              required:
                - email
                - image
              properties:
                email:
                  type: string
                  example: "john.doe@example.com"
                image:
                  type: string
                  format: binary
      responses:
        "201":
          description: Image uploaded successfully
          content:
            application/json:
              example:
                message: "Image uploaded successfully."
        "400":
          description: Invalid request
        "404":
          description: User not found
          content:
            application/json:
              example:
                error: "User not found."

  /user/{email}:
    delete:
      summary: Delete User by Email
      description: Delete a user using their email as the identifier.
      parameters:
        - name: email
          in: path
          required: true
          schema:
            type: string
            example: "john.doe@example.com"
      responses:
        "200":
          description: User deleted successfully
          content:
            application/json:
              example:
                message: "User deleted successfully."
        "404":
          description: User not found
          content:
            application/json:
              example:
                error: "User not found."
