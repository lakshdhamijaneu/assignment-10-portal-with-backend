openapi: 3.0.0
info:
  title: Assignment 10 â€” User & Job Management API
  version: 2.0.0
  description: >
    Secure REST API for user management, authentication, profile image upload,
    and job management (admin + employee roles).  
    This version extends Assignment 8 by adding role-based fields and job endpoints.

servers:
  - url: http://localhost:3000

paths:
  /user:
    post:
      summary: Create User
      description: Create a new user with full name, email, strong password, and type.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - fullName
                - email
                - password
                - type
              properties:
                fullName:
                  type: string
                  example: "John Doe"
                email:
                  type: string
                  format: email
                  example: "john.doe@example.com"
                password:
                  type: string
                  example: "StrongPass123!"
                type:
                  type: string
                  enum: ["admin", "employee"]
                  example: "employee"
      responses:
        "201":
          description: User created successfully.
          content:
            application/json:
              example:
                message: "User created successfully."
        "400":
          description: Validation error.

  /user/login:
    post:
      summary: User Login
      description: Authenticate a user using email and password.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - email
                - password
              properties:
                email:
                  type: string
                  example: "john.doe@example.com"
                password:
                  type: string
                  example: "StrongPass123!"
      responses:
        "200":
          description: Login successful.
          content:
            application/json:
              example:
                message: "Login successful."
                user:
                  _id: "67b1ef..."
                  fullName: "John Doe"
                  email: "john.doe@example.com"
                  imagePath: "/images/john_doe_example.png"
                  type: "employee"
        "400":
          description: Invalid credentials.

  /user/edit:
    put:
      summary: Update User Details
      description: Edit full name and/or password using email as identifier.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - email
              properties:
                email:
                  type: string
                  example: "john.doe@example.com"
                fullName:
                  type: string
                  example: "Johnny Doe"
                password:
                  type: string
                  example: "NewStrongPass@123"
      responses:
        "200":
          description: User updated successfully.
        "404":
          description: User not found.

  /users:
    get:
      summary: Retrieve All Users
      description: Returns all users except passwords.
      responses:
        "200":
          description: List of users.
          content:
            application/json:
              example:
                users:
                  - _id: "67b1ef..."
                    fullName: "Alice Admin"
                    email: "alice@example.com"
                    type: "admin"
                    imagePath: null

  /user/uploadImage:
    post:
      summary: Upload User Profile Image
      description: Upload a JPEG/PNG/GIF image for a user.
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              required:
                - email
                - image
              properties:
                email:
                  type: string
                  example: "john.doe@example.com"
                image:
                  type: string
                  format: binary
      responses:
        "201":
          description: Image uploaded successfully.
        "400":
          description: Invalid request.
        "404":
          description: User not found.

  /user/{email}:
    delete:
      summary: Delete User by Email
      description: Delete a user using their email.
      parameters:
        - name: email
          in: path
          required: true
          schema:
            type: string
            example: "john.doe@example.com"
      responses:
        "200":
          description: User deleted successfully.
        "404":
          description: User not found.

  /create/job:
    post:
      summary: Create Job Posting (Admin only)
      description: Admin creates a new job posting.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - companyName
                - jobTitle
                - description
                - salary
              properties:
                companyName:
                  type: string
                  example: "Google"
                jobTitle:
                  type: string
                  example: "Software Engineer"
                description:
                  type: string
                  example: "Build scalable backend services."
                salary:
                  type: number
                  example: 150000
      responses:
        "201":
          description: Job created successfully.
        "400":
          description: Invalid job details.

  /jobs:
    get:
      summary: Retrieve All Jobs
      description: Returns all job postings.
      responses:
        "200":
          description: List of jobs.
          content:
            application/json:
              example:
                jobs:
                  - _id: "87123abc"
                    companyName: "Google"
                    jobTitle: "Software Engineer"
                    description: "Build and maintain backend systems."
                    salary: 150000
